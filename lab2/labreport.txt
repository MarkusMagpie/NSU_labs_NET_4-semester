Вопросы: 
1 Зачем нужен DHCP-сервер в сети?
    DHCP-сервер обеспечивает назначение IP-адресов клиентам. Также сервер ведет таблицу выделенных IP адресов, чтобы избежать дублирования.

    Уточнение: DHCP также предоставляет другие параметры сети (маску подсети, шлюз, DNS-серверы).

2 Что произойдёт, если в одной сети будет несколько DHCP-серверов?
    В таком случае клиент отправит всем серверам сообщение DHCP Discover по широковещательному MAC-адресу. 
    Все сервера отправят в ответ DHCP Offer с уникальным IP-адресом.
    Но клиент выберет лишь первый полученный IP адрес из DHCP Offer и включит выбранный во все DHCP Request сообщения. 
    Итого ответит на Request только тот сервер, который опознает свой уникальный IP-адрес. Он вернет сообщение DHCP Ack, 
        остальные сервера вернут клиенту DHCP Nack, IP адреса освобождаются.

3 Как клиент обнаруживает DHCP-сервер в сети?
    С помощью сообщения DHCP Discover на широковещательный MAC-адрес FF:FF:FF:FF:FF:FF - это сообщение примут все компьютеры в данной подсети.
        Если сервер в другой подсети, используется конфигурация маршрутизаторов DHCP Relay agent - передает такой широковещательный трафик,
            который относится к DHCP. 

Практика:
1 dhcp_server2
    0 терминал
        sudo wireshark
        dhcp 
    1 терминал 
        g++ dhcp_server2.cpp -o dhcp_server2
        sudo ./dhcp_server2
    2 терминал
        g++ dhcp_client.cpp -o dhcp_client
        sudo ./dhcp_client
    3 терминал
        g++ dhcp_client.cpp -o dhcp_client
        sudo ./dhcp_client

    рассмотрю подробно логику работы dhcp сервера:
        просто по комментариям dhcp_server2
        ! не забудь про фоновую очистку по времени аренды !



2 Модификация клиентской программы
    добавлена функция dhcp_handshake и теперь IP адрес получаю от DHCP сервера!

    0 терминал
        sudo wireshark
        udp.port==5000
    1-3 без изменений
    4 терминал 
        nc -ulv 5000
        -u — использовать UDP.
        -l — режим прослушивания (сервер)

    пример вывода netcat:
    sorokinm@sorokinm-CREFG-XX:~$ nc -ul 5000
    PING 3 from 192.168.1.101 (AA:BB:CC:DD:EE:55)123446

    то есть клиент отправит сообщение вида PING 3 from 192.168.1.101 (AA:BB:CC:DD:EE:55).
    Netcat получит это сообщение и будет ждать ввода ответа - я ввел ответ: 123446\n


    пояснения коментариями в функции dhcp_handshake
    
     

    